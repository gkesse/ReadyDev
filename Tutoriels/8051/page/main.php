<div class="Parallax GParallax1"><div class="Img Binary"><div class="Caption"><a href="#"><div class="Text">Apprendre le développement de système embarqué en C avec le 8051</div></a></div></div><div class="Body2 Orange">Le <b>8051</b> est un microcontrôleur de développement de système embarqué.<br>Le but de ce tutoriel est de vous apprendre le développement de système embarqué en C avec le <b>8051</b>.<br>Produit par <b>Gérard KESSE</b>.<br><br><div class="Content0 GSummary1"><div class="Body0" id="Loader_1529412976174"><div class="Row26">Summary 1</div></div><script>loadSummary1("Loader_1529412976174");</script></div></div></div><br><div class="Content2 GTitle1"><div class="MainBlock2"><div class="Content"><h1 class="Title2 Center" id="Installation sous Windows"><a class="Link3" href="#">Installation sous Windows</a></h1><div class="Body3">Le but de cette section est de vous présenter les différents outils nécessaires pour apprendre le développement de système embarqué avec le <span class="GColor1" style="color:lime;">8051</span><span class="GColor1" style="color:lime;"></span>, sous Windows.<br>Produit par <b>Gérard KESSE</b>.<br><br>Dans ce tutoriel, nous utiliserons, sous Windows:<br>- Keil µVision, comme environnement de développement intégré.<br>- Proteus, comme simulateur de circuits électriques.<br>- VSPE, comme émulateur de ports série.<br>- RealTerm, comme terminal de communications série.<br>- Notepad++, comme éditeur de texte.<br><br><h3 class="Title8 GTitle3">Télécharger Keil µVision<br></h3><a class="Link7 GLink1" style="color:lime;" target="_blank" href="https://www.keil.com/">https://www.keil.com/</a><br><br><h3 class="Title8 GTitle3">Télécharger Proteus</h3><a class="Link7 GLink1" style="color:lime;" target="_blank" href="https://www.labcenter.com/">https://www.labcenter.com/</a><br><br><h3 class="Title8 GTitle3">Télécharger VSPE</h3><a class="Link7 GLink1" style="color:lime;" target="_blank" href="http://www.eterlogic.com/Downloads.html">http://www.eterlogic.com/Downloads.html</a><br><br><h3 class="Title8 GTitle3">Télécharger RealTerm</h3><a class="Link7 GLink1" style="color:lime;" target="_blank" href="https://sourceforge.net/projects/realterm/">https://sourceforge.net/projects/realterm/</a><br><br><h3 class="Title8 GTitle3">Télécharger Notepad++</h3><a class="Link7 GLink1" style="color:lime;" target="_blank" href="https://notepad-plus-plus.org/fr/">https://notepad-plus-plus.org/fr/</a></div></div></div></div><br><div class="Content2 GTitle1"><div class="MainBlock2"><div class="Content"><h1 class="Title2 Center" id="Utilisation de Keil µVision"><a class="Link3" href="#">Utilisation de Keil µVision</a></h1><div class="Body3">Le but de cette section est de vous apprendre à utiliser <span class="GColor1" style="color:lime;">Keil µVision</span>, sous Windows.<br>Produit par <b>Gérard KESSE</b>.<br><br>Keil µVision permet d'éditer des programmes, les compiler et les charger dans les microcontrôleurs 8051.<br><br><div class="Content0 GSummary2"><div class="Body0" id="Loader_1532274847335"><div class="Row26">Summary 2</div></div><script>loadSummary2("Loader_1532274847335");</script></div><br><h2 class="Title7 GTitle2" id="Utilisation de Keil µVision-Créer des nouveaux projets"><a class="Link9" href="#Utilisation de Keil µVision">Créer des nouveaux projets</a></h2><br><h3 class="Title8 GTitle3">Créer des nouveaux projets</h3><div class="Img3 GImage"><img src="img/Keil.png" alt="img/Keil.png"></div><br><div class="Img3 GImage"><img src="img/Keil_02.png" alt="img/Keil_02.png"></div><br><div class="Img3 GImage"><img src="img/Keil_03.png" alt="img/Keil_03.png"></div><br><div class="Img3 GImage"><img src="img/Keil_04.png" alt="img/Keil_04.png"></div><br><div class="Img3 GImage"><img src="img/Keil_05.png" alt="img/Keil_05.png"></div><br><h2 class="Title7 GTitle2" id="Utilisation de Keil µVision-Créer des fichiers sources"><a class="Link9" href="#Utilisation de Keil µVision">Créer des fichiers sources</a></h2><br><h3 class="Title8 GTitle3">Créer des fichiers sources</h3><div class="Img3 GImage"><img src="img/Keil_06.png" alt="img/Keil_06.png"></div><br><div class="Img3 GImage"><img src="img/Keil_07.png" alt="img/Keil_07.png"></div><br><div class="Img3 GImage"><img src="img/Keil_08.png" alt="img/Keil_08.png"></div><br><div class="Img3 GImage"><img src="img/Keil_09.png" alt="img/Keil_09.png"></div><br><div class="Img3 GImage"><img src="img/Keil_10.png" alt="img/Keil_10.png"></div><br><h2 class="Title7 GTitle2" id="Utilisation de Keil µVision-Créer des fichiers headers"><a class="Link9" href="#Utilisation de Keil µVision">Créer des fichiers headers</a></h2><br><h3 class="Title8 GTitle3">Créer des fichiers headers</h3><div class="Img3 GImage"><img src="img/Keil_17.png" alt="img/Keil_17.png"></div><br><div class="Img3 GImage"><img src="img/Keil_18.png" alt="img/Keil_18.png"></div><br><div class="Img3 GImage"><img src="img/Keil_19.png" alt="img/Keil_19.png"></div><br><div class="Img3 GImage"><img src="img/Keil_20.png" alt="img/Keil_20.png"></div><br><div class="Img3 GImage"><img src="img/Keil_21.png" alt="img/Keil_21.png"></div><br><h2 class="Title7 GTitle2" id="Utilisation de Keil µVision-Ajouter des fichiers sources"><a class="Link9" href="#Utilisation de Keil µVision">Ajouter des fichiers sources</a></h2><br><h3 class="Title8 GTitle3">Ajouter des fichiers sources</h3><div class="Img3 GImage"><img src="img/Keil_11.png" alt="img/Keil_11.png"></div><br><div class="Img3 GImage"><img src="img/Keil_12.png" alt="img/Keil_12.png"></div><br><div class="Img3 GImage"><img src="img/Keil_13.png" alt="img/Keil_13.png"></div><br><h2 class="Title7 GTitle2" id="Utilisation de Keil µVision-Configurer des répertoires de fichiers headers"><a class="Link9" href="#Utilisation de Keil µVision">Configurer des répertoires de fichiers headers</a></h2><br><h3 class="Title8 GTitle3">Configurer des répertoires de fichiers headers</h3><div class="Img3 GImage"><img src="img/Keil_22.png" alt="img/Keil_22.png"></div><br><div class="Img3 GImage"><img src="img/Keil_23.png" alt="img/Keil_23.png"></div><br><div class="Img3 GImage"><img src="img/Keil_24.png" alt="img/Keil_24.png"></div><br><div class="Img3 GImage"><img src="img/Keil_25.png" alt="img/Keil_25.png"></div><br><h2 class="Title7 GTitle2" id="Utilisation de Keil µVision-Créer des fichiers exécutables"><a class="Link9" href="#Utilisation de Keil µVision">Créer des fichiers exécutables</a></h2><br><h3 class="Title8 GTitle3">Créer des fichiers exécutables</h3><div class="Img3 GImage"><img src="img/Keil_14.png" alt="img/Keil_14.png"></div><br><div class="Img3 GImage"><img src="img/Keil_15.png" alt="img/Keil_15.png"></div><br><div class="Img3 GImage"><img src="img/Keil_16.png" alt="img/Keil_16.png"></div><br><h2 class="Title7 GTitle2" id="Utilisation de Keil µVision-Compiler des projets"><a class="Link9" href="#Utilisation de Keil µVision">Compiler des projets</a></h2><br><h3 class="Title8 GTitle3">Compiler des projets</h3><div class="Img3 GImage"><img src="img/Keil_26.png" alt="img/Keil_26.png"></div><br><div class="Img3 GImage"><img src="img/Keil_27.png" alt="img/Keil_27.png"></div><br><h2 class="Title7 GTitle2" id="Utilisation de Keil µVision-Définir des macros préprocesseurs"><a class="Link9" href="#Utilisation de Keil µVision">Définir des macros préprocesseurs</a></h2><br><h3 class="Title8 GTitle3">Définir des macros préprocesseurs</h3><div class="Img3 GImage"><img src="img/Keil_28.png" alt="img/Keil_28.png"></div><br><div class="Img3 GImage"><img src="img/Keil_29.png" alt="img/Keil_29.png"></div><br><h2 class="Title7 GTitle2" id="Utilisation de Keil µVision-Consulter la documentation"><a class="Link9" href="#Utilisation de Keil µVision">Consulter la documentation</a></h2><br><h3 class="Title8 GTitle3">Consulter la documentation</h3><div class="Img3 GImage"><img src="img/Keil_30.png" alt="img/Keil_30.png"></div><br><div class="Img3 GImage"><img src="img/Keil_31.png" alt="img/Keil_31.png"></div><br><div class="Img3 GImage"><img src="img/Keil_32.png" alt="img/Keil_32.png"></div><br><div class="Img3 GImage"><img src="img/Keil_33.png" alt="img/Keil_33.png"></div></div></div></div></div><br><div class="Content2 GTitle1"><div class="MainBlock2"><div class="Content"><h1 class="Title2 Center" id="Utilisation de Proteus"><a class="Link3" href="#">Utilisation de Proteus</a></h1><div class="Body3">Le but de cette section est de vous apprendre à utiliser <span class="GColor1" style="color:lime;">Proteus</span>, sous Windows.<br>Produit par Gérard KESSE.<br><br>Proteus permet de simuler des circuits électriques.<br><br><div class="Content0 GSummary2"><div class="Body0" id="Loader_1533796804798"><div class="Row26">Summary 2</div></div><script>loadSummary2("Loader_1533796804798");</script></div><br><h2 class="Title7 GTitle2" id="Utilisation de Proteus-Ajouter des composants"><a class="Link9" href="#Utilisation de Proteus">Ajouter des composants</a></h2><br><h3 class="Title8 GTitle3">Ajouter des composants</h3><div class="Img3 GImage"><img src="img/Proteus.png" alt="img/Proteus.png"></div><br><div class="Img3 GImage"><img src="img/Proteus_02.png" alt="img/Proteus_02.png"></div><br><div class="Img3 GImage"><img src="img/Proteus_03.png" alt="img/Proteus_03.png"></div><br><h2 class="Title7 GTitle2" id="Utilisation de Proteus-Créer des schémas électriques"><a class="Link9" href="#Utilisation de Proteus">Créer des schémas électriques</a></h2><br><h3 class="Title8 GTitle3">Créer des schémas électriques</h3><div class="Img3 GImage"><img src="img/Proteus_04.png" alt="img/Proteus_04.png"></div><br><h2 class="Title7 GTitle2" id="Utilisation de Proteus-Charger des fichiers exécutables"><a class="Link9" href="#Utilisation de Proteus">Charger des fichiers exécutables</a></h2><br><h3 class="Title8 GTitle3">Charger des fichiers exécutables</h3><div class="Img3 GImage"><img src="img/Proteus_07.png" alt="img/Proteus_07.png"></div><br><div class="Img3 GImage"><img src="img/Proteus_08.png" alt="img/Proteus_08.png"></div><br><h2 class="Title7 GTitle2" id="Utilisation de Proteus-Démarrer des simulations électriques"><a class="Link9" href="#Utilisation de Proteus">Démarrer des simulations électriques</a></h2><br><h3 class="Title8 GTitle3">Démarrer des simulations électriques</h3><div class="Img3 GImage"><img src="img/Proteus_05.png" alt="img/Proteus_05.png"></div><br><div class="Img3 GImage"><img src="img/Proteus_06.png" alt="img/Proteus_06.png"></div></div></div></div></div><br><div class="Content2 GTitle1"><div class="MainBlock2"><div class="Content"><h1 class="Title2 Center" id="Structure logicielle boucle infinie"><a class="Link3" href="#">Structure logicielle boucle infinie</a></h1><div class="Body3">Le but de cette section est de vous apprendre la <span class="GColor1" style="color:lime;">structure logicielle boucle infinie</span> avec le C 8051.<br>Produit par <b>Gérard KESSE</b>.<br><br>La structure logicielle boucle infinie permet de gérer des applications embarquées monotâche.<br><br><h3 class="Title8 GTitle3">Structure logicielle boucle infinie</h3><div class="GCode1"><pre class="Code2"><xmp class="AceCode" data-mode="c_cpp">//===============================================
void main() {
    GLedFlash_Init();
    while(1) {
        GLedFlash_Update();
    }
}
//===============================================</xmp></pre></div><br><h3 class="Title8 GTitle3">Initialisation de la diode LED</h3><div class="GCode1"><pre class="Code2"><xmp class="AceCode" data-mode="c_cpp">//===============================================
void GLedFlash_Init() {
    LED_PIN = LED_OFF;
}
//===============================================</xmp></pre></div><br><h3 class="Title8 GTitle3">Mise à jour de la diode LED</h3><div class="GCode1"><pre class="Code2"><xmp class="AceCode" data-mode="c_cpp">//===============================================
void GLedFlash_Update() {
    if(gLedFlash_State == FALSE) {
        gLedFlash_State = TRUE;
        LED_PIN = LED_ON;
    }
    else {
        gLedFlash_State = FALSE;
        LED_PIN = LED_OFF;
    }
    GDelay_ms(1000);
}
//===============================================</xmp></pre></div><br><h3 class="Title8 GTitle3">Délai logiciel</h3><div class="GCode1"><pre class="Code2"><xmp class="AceCode" data-mode="c_cpp">//===============================================
void GDelay_ms(uint ms) {
    uint lDelay;
    uint lDelay_ms;
    for(lDelay = 0; lDelay < ms; lDelay++) {
        for(lDelay_ms = 0; lDelay_ms < DELAY_MS; lDelay_ms++);
    }
}
//===============================================</xmp></pre></div><br><h3 class="Title8 GTitle3">Simulation électrique</h3><br><span class="GColor1" style="color:lime;">Diode LED éteinte pendant 1s</span><div class="Img3 GImage"><img src="img/Boucle_Infinie.png" alt="img/Boucle_Infinie.png"></div><br><span class="GColor1" style="color:lime;">Diode LED allumée pendant 1s</span><div class="Img3 GImage"><img src="img/Boucle_Infinie_02.png" alt="img/Boucle_Infinie_02.png"></div><br><span class="GColor1" style="color:lime;">Oscilloscope</span><div class="Img3 GImage"><img src="img/Boucle_Infinie_03.png" alt="img/Boucle_Infinie_03.png"></div></div></div></div></div><br><div class="Content2 GTitle1"><div class="MainBlock2"><div class="Content"><h1 class="Title2 Center" id="Gérer le mode Idle"><a class="Link3" href="#">Gérer le mode Idle</a></h1><div class="Body3">Le but de cette section est de vous apprendre à <span class="GColor1" style="color:lime;">gérer le mode Idle</span> avec le C 8051.<br>Produit par Gérard KESSE.<br><br>Le mode Idle permet de passer en mode économie d'énergie.<br><br><h3 class="Title8 GTitle3">Programme principal</h3><div class="GCode1"><pre class="Code2"><xmp class="AceCode" data-mode="c_cpp">//===============================================
void main() {
    GLedFlash_Init();
    GInterruptEx0_Init();
    while(1) {
        GLedFlash_Update();
        GModeIdle_Start();
    }
}
//===============================================</xmp></pre></div><br><h3 class="Title8 GTitle3">Initialisation de la diode LED</h3><div class="GCode1"><pre class="Code2"><xmp class="AceCode" data-mode="c_cpp">//===============================================
void GLedFlash_Init() {
    LED_PIN = LED_OFF;
}
//===============================================</xmp></pre></div><br><h3 class="Title8 GTitle3">Mise à jour de la diode LED</h3><div class="GCode1"><pre class="Code2"><xmp class="AceCode" data-mode="c_cpp">//===============================================
void GLedFlash_Update() {
    gLedFlash_Time = 0;
    while(1) {
        if(gLedFlash_State == FALSE) {
            gLedFlash_State = TRUE;
            LED_PIN = LED_ON;
        }
        else {
            gLedFlash_State = FALSE;
            LED_PIN = LED_OFF;
        }
        GDelay_ms(200);
        if(++gLedFlash_Time >= 10) break;
    }
    GDelay_ms(1000);
}
//===============================================</xmp></pre></div><br><h3 class="Title8 GTitle3">Initialisation de l'interruption externe 0</h3><div class="GCode1"><pre class="Code2"><xmp class="AceCode" data-mode="c_cpp">//===============================================
void GInterruptEx0_Init() {
    IT0 = 1;
    EX0 = 1;
    EA = 1;
}
//===============================================</xmp></pre></div><br><h3 class="Title8 GTitle3">Fonction de rappel de l'interruption externe 0</h3><div class="GCode1"><pre class="Code2"><xmp class="AceCode" data-mode="c_cpp">//===============================================
void GInterruptEx0_Update() interrupt INTERRUPT_EXTERNAL_0 {
    GDelay_ms(200);
}
//===============================================</xmp></pre></div><br><h3 class="Title8 GTitle3">Entrer dans le mode Idle</h3><div class="GCode1"><pre class="Code2"><xmp class="AceCode" data-mode="c_cpp">//===============================================
void GModeIdle_Start() {
    PCON |= 0x01;
}
//===============================================</xmp></pre></div><br><h3 class="Title8 GTitle3">Délai logiciel</h3><div class="GCode1"><pre class="Code2"><xmp class="AceCode" data-mode="c_cpp">//===============================================
void GDelay_ms(uint ms) {
    uint lDelay;
    uint lDelay_ms;
    for(lDelay = 0; lDelay < ms; lDelay++) {
        for(lDelay_ms = 0; lDelay_ms < DELAY_MS; lDelay_ms++);
    }
}
//===============================================</xmp></pre></div><br><h3 class="Title8 GTitle3">Simulation électrique</h3><br><span class="GColor1" style="color:lime;">Diode LED éteinte</span><div class="Img3 GImage"><img src="img/Mode_Idle.png" alt="img/Mode_Idle.png"></div><br><span class="GColor1" style="color:lime;">Diode LED allumée</span><div class="Img3 GImage"><img src="img/Mode_Idle_02.png" alt="img/Mode_Idle_02.png"></div><br><span class="GColor1" style="color:lime;">Une interruption permet de quitter le mode Idle</span><div class="Img3 GImage"><img src="img/Mode_Idle_03.png" alt="img/Mode_Idle_03.png"></div><br><span class="GColor1" style="color:lime;">Le bouton Reset permet de quitter le mode Idle</span><div class="Img3 GImage"><img src="img/Mode_Idle_04.png" alt="img/Mode_Idle_04.png"></div></div></div></div></div><br><div class="Content2 GTitle1"><div class="MainBlock2"><div class="Content"><h1 class="Title2 Center" id="Gérer le mode Power Down"><a class="Link3" href="#">Gérer le mode Power Down</a></h1><div class="Body3">Le but de cette section est de vous apprendre à <span class="GColor1" style="color:lime;">gérer le mode Power Down</span> avec le C 8051.<br>Produit par Gérard KESSE.<br><br>Le mode Idle permet de passer en mode économie d'énergie.<br><br><h3 class="Title8 GTitle3">Programme principal</h3><div class="GCode1"><pre class="Code2"><xmp class="AceCode" data-mode="c_cpp">//===============================================
void main() {
    GLedFlash_Init();
    GInterruptEx0_Init();
    while(1) {
        GLedFlash_Update();
        GModePowerDown_Start();
    }
}
//===============================================</xmp></pre></div><br><h3 class="Title8 GTitle3">Initialisation de la diode LED</h3><div class="GCode1"><pre class="Code2"><xmp class="AceCode" data-mode="c_cpp">//===============================================
void GLedFlash_Init() {
    LED_PIN = LED_OFF;
}
//===============================================</xmp></pre></div><br><h3 class="Title8 GTitle3">Mise à jour de la diode LED</h3><div class="GCode1"><pre class="Code2"><xmp class="AceCode" data-mode="c_cpp">//===============================================
void GLedFlash_Update() {
    gLedFlash_Time = 0;
    while(1) {
        if(gLedFlash_State == FALSE) {
            gLedFlash_State = TRUE;
            LED_PIN = LED_ON;
        }
        else {
            gLedFlash_State = FALSE;
            LED_PIN = LED_OFF;
        }
        GDelay_ms(200);
        if(++gLedFlash_Time >= 10) break;
    }
    GDelay_ms(1000);
}
//===============================================</xmp></pre></div><br><h3 class="Title8 GTitle3">Initialisation de l'interruption externe 0</h3><div class="GCode1"><pre class="Code2"><xmp class="AceCode" data-mode="c_cpp">//===============================================
void GInterruptEx0_Init() {
    IT0 = 1;
    EX0 = 1;
    EA = 1;
}
//===============================================</xmp></pre></div><br><h3 class="Title8 GTitle3">Fonction de rappel de l'interruption externe 0</h3><br><br><h3 class="Title8 GTitle3">Entrer dans le mode Power Down</h3><div class="GCode1"><pre class="Code2"><xmp class="AceCode" data-mode="c_cpp">//===============================================
void GInterruptEx0_Update() interrupt INTERRUPT_EXTERNAL_0 {
    GDelay_ms(200);
}
//===============================================</xmp></pre></div><br><h3 class="Title8 GTitle3">Délai logiciel</h3><div class="GCode1"><pre class="Code2"><xmp class="AceCode" data-mode="c_cpp">//===============================================
void GDelay_ms(uint ms) {
    uint lDelay;
    uint lDelay_ms;
    for(lDelay = 0; lDelay < ms; lDelay++) {
        for(lDelay_ms = 0; lDelay_ms < DELAY_MS; lDelay_ms++);
    }
}
//===============================================</xmp></pre></div><br><h3 class="Title8 GTitle3">Résultat</h3><br><span class="GColor1" style="color:lime;">Diode LED éteinte</span><div class="Img3 GImage"><img src="img/Mode_Power_Down.png" alt="img/Mode_Power_Down.png"></div><br><span class="GColor1" style="color:lime;">Diode LED allumée</span><div class="Img3 GImage"><img src="img/Mode_Power_Down_02.png" alt="img/Mode_Power_Down_02.png"></div><br><span class="GColor1" style="color:lime;">Une interruption ne permet pas de quitter le mode Power Down</span><div class="Img3 GImage"><img src="img/Mode_Power_Down_03.png" alt="img/Mode_Power_Down_03.png"></div><br><span class="GColor1" style="color:lime;">Le bouton Reset permet de quitter le mode Power Down</span><div class="Img3 GImage"><img src="img/Mode_Power_Down_04.png" alt="img/Mode_Power_Down_04.png"></div></div></div></div></div><br>